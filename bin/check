#!/usr/bin/env bash

echo -e "=== ğŸ” Running Brakeman security checks ===\n"
bin/brakeman

if [ $? -ne 0 ]; then
  echo -e "\n=== âŒ Brakeman security checks failed! ===\n"
  exit 1
fi

echo -e "=== âœ… Brakeman security checks passed! ===\n\n"

echo -e "=== ğŸ‘® Running Rubocop with auto-correct ===\n"
bundle exec rubocop -a

if [ $? -ne 0 ]; then
  echo -e "\n=== âŒ Rubocop with auto-correct failed! ===\n"
  exit 1
fi

echo -e "=== âœ… Rubocop with auto-correct passed! ===\n\n"

echo -e "=== ğŸ§ª Running Rails tests ===\n"
bin/rails test

if [ $? -ne 0 ]; then
  echo -e "\n=== âŒ Rails tests failed! ===\n\n"
  exit 1
fi

echo -e "=== âœ… Rails tests passed! ===\n\n"

echo -e "\n=== ğŸ‰ All checks completed successfully! ===\n\n" 